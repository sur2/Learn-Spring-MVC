# Learn-Spring-MVC



## 웹 애플리케이션

| 웹 서버(Web Server)                           | 웹 애플리케이션(Web Application) |
| --------------------------------------------- | -------------------------------- |
| 정적 리소스(파일: html, css, javascript) 실행 | 애플리케이션 로직(Java) 실행 |



### 웹 시스템 구성

Web Server - Web Application Server(WAS)- DB

- Web Server : 정적 리소스 담당
- WAS : 애플리케이션 로직 담당
- DB :  데이터베이스 CRUD



### 서블릿

웹 브라우저 - 웹 애플리케이션 서버(+ 서블릿 컨테이너: HTTP request와 response 객체 처리)

#### 서블릿 컨테이너

- **싱글톤으로 관리됨**
  - 최초 로딩 시점에 서블릿 객체를 미리 만들어두고 재활용하는 것이 효율적임
  - **공유 변수 사용 주의**
- 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명주기  관리
- 동시 요청을 위한 멀티 쓰레드 처리 지원



### 동시 요청 - 멀티 쓰레드

#### 쓰레드

- 애플리케이션 코드를 하나씩 순차적으로 실행하는 것

#### 멀티 쓰레드

**요청 마다 쓰레드가 생성된다면?**

- 장점
  - 동시 요청 처리 가능
  - 독립적으로 사용 할 수 있음(하나의 쓰레드가 지연되어도 다른 쓰레드는 정상 작동)
- 단점
  - 생성 비용이 비쌈(쓰레드가 많을수록 응답속도가 느려짐)
  - 생성에 제한이 없음

#### 쓰레드풀

- 미리 쓰레드를 생성하고 보관하기 때문에 멀티 쓰레드의 단점을 보완 

예)

1. 200개의 쓰레드를 쓰레드풀에 보관

2. 필요할 때 마다 쓰레드를 대여

3. 다 쓴 쓰레드는 다시 쓰레드 풀에 반환

- 실무 Tip!
  - WAS의 주요 튜닝 포인트는 최대 쓰레드(max thread) 수이다.
  - 최대 쓰레드가 낮다면, 서버의 리소스는 여유롭지만, 클라이언트에 대한 응답 지연
  - 최대 쓰레드가 높다면, 동시 요청이 많을 때 CPU, 메모리 리소스가 임계점을 초과하여 서버가 다운
  - 클라우드 서버를 사용한다면 서버를 증설하고 튜닝, 그렇지 않다면 바로 튜닝
  - 애플리케이션 로직, CPU, 메모리, IO 리소스 상황을 모두 고려하여 쓰레드 개수를 정한다.(성능 테스트를 권장)

**멀티 쓰레드 환경에서 싱글톤 객체(서블릿, 스프링 빈)는 주의해서 사용**



### HTML, HTTP API, CSR, SSR

#### HTTP API

- HTML이 아닌 데이터를 전달

#### CSR 클라이언트 사이드 렌더링

- HTML 결과를 javascript를 사용해서 동적으로 생성

#### SSR 서버 사이드 렌더링

- 서버에서 최종 HTML을 생성하여  클라이언트에 전달



## 서블릿

``@ServletComponentScan``: Servlet을 다 찾아줘!

